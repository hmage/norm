#!/bin/bash

needs_tool pkg-config ## to find libncurses
depends_on libncurses

fetch_source https://downloads.sourceforge.net/procps-ng/Production/procps-ng-4.0.0.tar.xz 70f2e8fa5b2643330fe93bde6346feab3149dc5e

OURNAME=`basename "${BASH_SOURCE[0]}"` ## get our filename, it could be a library name

if [[ $OURNAME == watch ]]; then
    do_unpack
    pushd_src
    CPPFLAGS="$CPPFLAGS -I$ESCAPED_PREFIX/include/ncurses" \
    LDFLAGS="$LDFLAGS -lintl" \
    do_auto_configure
    ls -l Makefile
    make watch
    install "watch" "$PREFIX/bin/watch"
    install "watch.1" "$PREFIX/share/man/man1/watch.1"
    popd_src
else
    CPPFLAGS="$CPPFLAGS -I$ESCAPED_PREFIX/include/ncurses" \
    do_unpack_compile
fi
