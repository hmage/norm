#!/bin/bash

[[ $OSTYPE != *linux* ]] && log "cpuid is linux-specific binary, refusing to build" && false

fetch_source http://etallen.com/cpuid/cpuid-20220224.src.tar.gz fe16c3516a9fb44c54ecb924cc412d46d4d289c9

do_unpack
pushd_src
sed -i.bak 's/-Wimplicit-fallthrough//' Makefile
do_make
install -D -s -m 755 cpuid        "$PREFIX"/bin/cpuid
install -D    -m 444 cpuid.man.gz "$PREFIX"/share/man/man1/cpuid.man.gz
popd_src