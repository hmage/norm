#!/bin/bash

[[ $OSTYPE != *linux* ]] && log "cpuid is linux-specific binary, refusing to build" && false

fetch_source http://etallen.com/cpuid/cpuid-20250513.src.tar.gz 7785fcae414b3a4c2524f5c74086e46ecaed7a01

do_unpack
pushd_src
sed -i.bak 's/-Wimplicit-fallthrough//' Makefile
do_make
install -D -s -m 755 cpuid        "$PREFIX"/bin/cpuid
install -D    -m 444 cpuid.man.gz "$PREFIX"/share/man/man1/cpuid.man.gz
popd_src