#!/bin/bash

[[ $OSTYPE != *linux* ]] && log "cpuid is linux-specific binary, refusing to build" && false

fetch_source http://etallen.com/cpuid/cpuid-20221201.src.tar.gz 06440dc0bb945e1f5f9d645dcbf63960bd7ecac1

do_unpack
pushd_src
sed -i.bak 's/-Wimplicit-fallthrough//' Makefile
do_make
install -D -s -m 755 cpuid        "$PREFIX"/bin/cpuid
install -D    -m 444 cpuid.man.gz "$PREFIX"/share/man/man1/cpuid.man.gz
popd_src