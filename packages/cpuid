#!/bin/bash

[[ $OSTYPE != *linux* ]] && log "cpuid is linux-specific binary, refusing to build" && false

fetch_source http://etallen.com/cpuid/cpuid-20260220.src.tar.gz 5baa41fc7c0eed6afeeddf8f5c3e7ed70cfa1a3f

do_unpack
pushd_src
sed -i.bak 's/-Wimplicit-fallthrough//' Makefile
do_make
install -D -s -m 755 cpuid        "$PREFIX"/bin/cpuid
install -D    -m 444 cpuid.man.gz "$PREFIX"/share/man/man1/cpuid.man.gz
popd_src