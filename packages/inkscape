#!/bin/bash

depends_on autoconf automake libtool
depends_on intltool
depends_on freetype
depends_on liblcms2
depends_on libcairomm
depends_on libglibmm
depends_on libpango
depends_on libxslt
depends_on libgc
depends_on libgsl
depends_on libgtk2
depends_on libgtkmm
depends_on libboost
depends_on libpopt

fetch_source https://inkscape.org/gallery/item/10552/inkscape-0.92.0.tar.bz2 8f576bc828138e9c3c835a458c3cefd5801a907a

do_unpack
pushd_src
do_patch_inline -p0 << 'EOF'
--- configure.ac
+++ configure.ac
@@ -723,10 +723,6 @@
 if test "x$enable_gtk3" = "xyes"; then
 
 	ink_spell_pkg=
-	if pkg-config --exists gtkspell-3.0; then
-		ink_spell_pkg=gtkspell-3.0
-		AC_DEFINE(WITH_GTKSPELL, 1, [enable gtk spelling widget])
-	fi
 
 	PKG_CHECK_MODULES(GTK,
 			  gtk+-3.0  >= 3.8
@@ -804,10 +800,6 @@
 else
 
 	ink_spell_pkg=
-	if pkg-config --exists gtkspell-2.0; then
-		ink_spell_pkg=gtkspell-2.0
-		AC_DEFINE(WITH_GTKSPELL, 1, [enable gtk spelling widget])
-	fi
 
 	PKG_CHECK_MODULES(GTK,
 			  gtk+-2.0  >= 2.24
@@ -928,17 +920,6 @@
 		[INKSCAPE_LIBS="$INKSCAPE_LIBS -lpopt"],
 		AC_MSG_ERROR([libpopt is required]))
 
-dnl **************************
-dnl Check for aspell 
-dnl ******************************
-AC_CHECK_LIB(aspell, new_aspell_config, [AC_CHECK_HEADER(aspell.h, aspell_ok=yes, aspell_ok=no)], aspell_ok=no, -lz -lm)
-if test "x$aspell_ok" = "xyes"; then
-	AC_DEFINE(HAVE_ASPELL, 1, [Use aspell for built-in spellchecker])
-  INKSCAPE_LIBS="$INKSCAPE_LIBS -laspell"
-else
-	AC_MSG_CHECKING([Aspell not found, spell checker will be disabled])
-fi
-
 dnl Check for bind_textdomain_codeset, including -lintl if GLib brings it in.
 sp_save_LIBS=$LIBS
 LIBS="$LIBS $INKSCAPE_LIBS"
EOF
./autogen.sh
do_compile
popd_src
