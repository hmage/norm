#!/bin/bash

[[ $OSTYPE != *darwin* ]] && depends_on zlib ## osx gurantees to provide one, opportunistic linking on other systems
[[ $OSTYPE != *darwin* ]] && depends_on curl ## for https, but on osx it will use system framework

fetch_source https://www.kernel.org/pub/software/scm/git/git-2.21.0.tar.xz 6e798e745683d3a1d862f50bc3b4fde28479d482
fetch_file https://www.kernel.org/pub/software/scm/git/git-manpages-2.21.0.tar.xz 5d4aebadde087b742889fd3db1a2014df2007d5c

do_unpack_compile

## install bash completion
mkdir -p "$PREFIX/etc/bash_completion.d"
install "$SRCDIR/contrib/completion/git-completion.bash" "$PREFIX/etc/bash_completion.d/git-completion.bash"

## install git manpages
mkdir -p "$PREFIX/share/man"
cat "$CACHEDIR/$FILENAME" | xz -d | tar xf - -C "$PREFIX/share/man"
