#!/bin/bash

depends_on libjpeg libpng ## otherwise it's useless
depends_on libwebp        ## otherwise it can only decode webp, but not encode
depends_on libheif        ## very much needed if you need to handle iphone-made photos
depends_on libtiff

## colourspace management was less useful before, but now every photo taken by modern smartphone is not in default colourspace
depends_on liblcms2

## opportunistic linking
[[ $OSTYPE != *darwin* ]] && depends_on libxml ## guaranteed to exist on osx, no need to build our own
depends_on xz ## for liblzma
depends_on libjasper ## jpeg2000 reference implementation

fetch_source https://downloads.sourceforge.net/graphicsmagick/graphicsmagick/1.3.30/GraphicsMagick-1.3.30.tar.xz e9b1f6b84739eef3e112d4905e3d72b1e6983abd

do_unpack_compile
