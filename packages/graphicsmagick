#!/bin/bash

depends_on libjpeg   ## most common format, formula useless otherwise
depends_on libpng    ## another common format
depends_on liblcms2  ## colour profile support, very common
depends_on libheif   ## common format saved by photo cameras
depends_on libwebp   ## format served and owned by google
depends_on libtiff   ## format often seen in some places
depends_on libjasper ## jpeg2000, uncommon but builds quickly

fetch_source https://downloads.sf.net/graphicsmagick/graphicsmagick/1.3.46/GraphicsMagick-1.3.46.tar.xz ad3e6003d00f288619f3aaf93a1a45d0f945bc44

CONFFLAGS=(
--without-x   ## graphicsmagick is used most as library and command-line tool, GUI is not needed, if you need it, open an issue
--without-ttf ## don't build freetype and it's dependencies for a rarely used feature, but if you need it, open an issue
--without-trio ## trio contains portable printf functions, we don't really need that
--without-jxl  ## opportunistic linking, also jpeg-xl is broken in graphicsmagick because jxl changed their API
--without-zstd ## opportunistic linking, not main functionality
)

do_unpack_compile "${CONFFLAGS[@]}"
