#!/bin/bash

depends_on libjpeg libpng ## otherwise it's useless
depends_on libwebp        ## otherwise it can only decode webp, but not encode
depends_on libheif        ## very much needed if you need to handle iphone-made photos

## opportunistic linking
depends_on xz

## opportunistic linking with libraries that guaranteed to exist on osx
if [[ $OSTYPE != *darwin* ]]; then
	depends_on bzip2
	depends_on libxml
fi

fetch_source https://dl.bintray.com/homebrew/mirror/ImageMagick-7.0.8-50.tar.xz dacb49dfde9b54535416f06d60bb64789d2f5c1c

CONFFLAGS=(
--without-x   ## graphicsmagick is used most as library and command-line tool, GUI is not needed, if you need it, open an issue
)

do_unpack_compile "${CONFFLAGS[@]}"
