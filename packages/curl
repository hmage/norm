#!/bin/bash

[[ $OSTYPE != *darwin* ]] && depends_on openssl ## otherwise it won't download over https

fetch_source https://curl.se/download/curl-7.82.0.tar.gz 78d135ae0bc0180dd3bcc625af7e7eae9c0ba189

CONFFLAGS=(
"--with-ca-bundle=$PREFIX/etc/ssl/cert.pem"
--disable-ldap ## curl is usually a web fetcher, if you need ldap, open an issue
)

[[ $OSTYPE != *darwin* ]] && CONFFLAGS+=(--with-openssl) ## use openssl
[[ $OSTYPE == *darwin* ]] && CONFFLAGS+=(--with-secure-transport) ## but on osx use system library

do_unpack_compile "${CONFFLAGS[@]}"
